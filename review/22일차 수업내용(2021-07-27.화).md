## 22일차 수업내용(2021-07-27.화)

OOP ex03

인스턴스 변수(필드) = non-static 변수(필드)

- boolean  변수타입은 4byte
  - 배열은 바이트타입으로

offset = 상대적인주소

설계도에따라 생성된 변수 = 인스턴스(instance) = 객체

클래스안에 아무것도 없다고 하더라도 기본적으로 부가정보를 담고있는 부가변수는 만들어진다.new설계도로 만들면 생성은된다.

#### 클래스 변수(필드) = static 변수(필드)



인스턴스변수를 가리킬 때는 this를 반드시 붙여야 한다. 단! 생략할수는 있지만 무조건 붙힌다고 생각하자.

좌우명과 가치관 미리 생각해놓기

나의 미션은?

인스턴스를 생성할 때 무조건 생성자를 호출하게 된다.

파라미터가 없는 생성자를 기본생성자라고 한다.

this = 생성된 인스턴스의 주소

생성자가 한 개라도 있으면 컴파일러는 기본 생성자를 만들어주지 않는다.

인스턴스 변수를 만든후 생성자를 호출할때 생성자의 파라미터 값의 순서와 타입을 정확히 입력해야한다.



#### 변수 자동 초기화 ex03.0510~0530

**클래스 변수(static 변수)**

- 클래스 변수(스태틱 변수)는 생성되는 순간 0으로 자동 초기화 된다.

**인스턴스 변수(non-static변수)**

- 힙(heap)에 생성되는 인스턴스 필드(변수)는 자동으로 초기화된다.
- 인스턴스 필드(변수)는 생성되는 즉시 0으로 초기화 된다.
  - 정수(byte, short, int, long, char) : 0
  - 부동소수점(float, double) : 0.0 = 0
  - 논리(boolean) : false = 0
  - 레퍼런스: null = 0

**로컬 변수**

- 로컬 변수는 자동으로 초기화되지 않는다.
- 반드시 변수를 사용하기 전에 초기화 시켜야 한다.
- 초기화하지 않은 로컬 변수는 사용할 수 없다.

**초기화란?**

- 값을 한 번이라도 저장하는 것!



#### 스태틱 초기화 블록(static initializer) - 레퍼런스 선언

- 스태틱 블록은 여러개의 블록을 만들어도 컴파일할때 한개의 블록으로 합쳐진다!
  - 스태틱 블록을 여러개 만들려고 하지 말자 하나로합쳐서 만들자!
  - 스태틱블록은 클래스가 로딩 될때 실행된다.
    - 또는 스태틱멤버가 사용될때


- **클래스파일은 중복로딩 되지 않는다. 처음 1번만 로딩된다!**

- 클래스가 로딩되는 경우)

  - 1) 클래스 멤버(필드와 메서드)를 최초로 사용할 때
  - 2) 클래스 멤버(필드와 메서드)를 최초로 사용할 때
  - 3) 해당 클래스의 인스턴스를 최소로 생성할 때
    - 인스턴스를 만들려면 설계도가 있어야 하고,
    - 설계도는 메모리에 로딩되어 있어야 한다.
    - 따라서 설계도가 없으면 즉시 설계도를 로딩할 것이다.
  - 4) 자바에서 제공하는 도구를 사용하여 클래스를 로딩할 때,
    - 이미 클래스가 로딩되어 있다면 다시 로딩하지 않는다.
    - 메모리 절약을 위해, 자바는 중복해서 클래스를 메모리에 로딩하지 않는다.

- **클래스가 로딩 될 때 초기화 블록은 실행된다.**

- 클래스가 로딩된 후

  - 1) 클래스 필드가 생성된다.
  - 2) 클래스 블록(스태틱 블록)이 실행된다.
    - 레퍼런스를 선언 할 때는 클래스가 로딩 되지 않는다.

- **스태틱 초기화 블록(static initializer) - 변수 초기화 문장(variable initializer)**

  - 변수 초기화 문장(variable initializer)을 컴파일 할 때,

    - 스태틱 초기화 블록이 없으면 컴파일러가 자동으로 삽입한다.
    - 스태틱 초기화 블록에 a 에 100을 할당하는 문장을 삽입한다.
    - 밑의 코드와 같이 바뀐다.

  - ``` java
    public static class A {
        static int a = 100;
    } // 위에 코드처럼 초기화 문장을 선언 했다고 하더라도,
      // static int a;
      //    static {
      //      a = 100;
      //    }
      // 클래스 파일의 스태틱 블록은 위의 코드처럼 실행된다.
    ```

- 변수 초기화 문장(variable initializer)을 컴파일 과정

  - 일단 모든 스태틱 필드를 먼저 만든다.
  - 스태틱 변수 초기화 문장을 스태틱 블록으로 옮긴다.
  - 스태틱 블록 모두 순서에 따라 한 스태틱 블록에 합친다.
  - 즉, 스태틱 변수 초기화 문장과 스태틱 블록을 구분하지 않고 선언된 순서대로 하나의 스태틱 블록에 합친다.

- ` 스태틱 블록은 클래스 멤버를 사용하기 전에 유효한 값으로 초기화시키는 것. `

- ​